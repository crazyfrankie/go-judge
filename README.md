# Container Judge - åŸºäºå®¹å™¨çš„ä»£ç è¯„æµ‹ç³»ç»Ÿ

è¿™æ˜¯ä¸€ä¸ªåŸºäºå®¹å™¨(Docker/è‡ªå®ç°å®¹å™¨)çš„åˆ†å¸ƒå¼ä»£ç è¯„æµ‹ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œå…·æœ‰å®Œæ•´çš„å®‰å…¨éš”ç¦»å’Œèµ„æºé™åˆ¶åŠŸèƒ½ã€‚

## é¡¹ç›®ç‰¹ç‚¹

### ğŸš€ å®Œæ•´çš„è¯„æµ‹æµç¨‹
- **ç¼–è¯‘æ£€æŸ¥**: è‡ªåŠ¨æ£€æµ‹è¯­æ³•é”™è¯¯å’Œç¼–è¯‘é”™è¯¯
- **è¿è¡Œæ—¶ç›‘æ§**: å®æ—¶ç›‘æ§ç¨‹åºæ‰§è¡ŒçŠ¶æ€
- **èµ„æºé™åˆ¶**: æ”¯æŒæ—¶é—´å’Œå†…å­˜é™åˆ¶
- **è¾“å‡ºæ¯”è¾ƒ**: æ™ºèƒ½è¾“å‡ºæ¯”è¾ƒï¼Œæ”¯æŒå¤šç§æ¯”è¾ƒæ¨¡å¼
- **è¯¦ç»†ç»Ÿè®¡**: æä¾›è¯¦ç»†çš„æ‰§è¡Œç»Ÿè®¡ä¿¡æ¯

### ğŸ”’ å®‰å…¨éš”ç¦»
- **å®¹å™¨éš”ç¦»**: æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹åœ¨ç‹¬ç«‹å®¹å™¨ä¸­è¿è¡Œ
- **èµ„æºé™åˆ¶**: ä¸¥æ ¼çš„CPUã€å†…å­˜ã€æ–‡ä»¶ç³»ç»Ÿé™åˆ¶
- **è¿›ç¨‹é™åˆ¶**: é™åˆ¶è¿›ç¨‹æ•°é‡ï¼Œé˜²æ­¢forkç‚¸å¼¹
- **ç½‘ç»œéš”ç¦»**: é»˜è®¤ç¦ç”¨ç½‘ç»œè®¿é—®

### ğŸ“Š ä¸°å¯Œçš„ç»“æœä¿¡æ¯
```json
{
  "status": "accepted",
  "test_cases": [
    {
      "status": "accepted",
      "time_used": 150,
      "memory_used": 2048000,
      "output": "[5,4,3,2,1]",
      "expected_output": "[5,4,3,2,1]",
      "execution_result": {
        "time_used": 150,
        "memory_used": 2048000,
        "exit_code": 0,
        "output": "[5,4,3,2,1]",
        "error_output": ""
      }
    }
  ],
  "statistics": {
    "total_test_cases": 3,
    "accepted_test_cases": 3,
    "total_time": 450,
    "max_time": 200,
    "total_memory": 6144000,
    "max_memory": 2048000
  }
}
```

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client API    â”‚    â”‚   Judge Service  â”‚    â”‚  Runner Service â”‚
â”‚                 â”‚â”€â”€â”€â–¶â”‚                  â”‚â”€â”€â”€â–¶â”‚                 â”‚
â”‚ gRPC Interface  â”‚    â”‚  Multi-language  â”‚    â”‚Language-specificâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                         â”‚
                                â–¼                         â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚   Result Parser  â”‚    â”‚  Container      â”‚
                       â”‚                  â”‚    â”‚                 â”‚
                       â”‚ stats.txt        â”‚    â”‚ Isolated Exec   â”‚
                       â”‚ result.txt       â”‚    â”‚ Resource Limits â”‚
                       â”‚ error.txt        â”‚    â”‚ Security        â”‚
                       â”‚ exitcode.txt     â”‚    â”‚                 â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ”¯æŒçš„è¯„æµ‹çŠ¶æ€

| çŠ¶æ€ | è¯´æ˜ | å¯¹åº”åœºæ™¯ |
|------|------|----------|
| `ACCEPTED` | é€šè¿‡ | è¾“å‡ºå®Œå…¨æ­£ç¡® |
| `WRONG_ANSWER` | ç­”æ¡ˆé”™è¯¯ | è¾“å‡ºä¸æœŸæœ›ä¸ç¬¦ |
| `TIME_LIMIT_EXCEEDED` | è¶…æ—¶ | æ‰§è¡Œæ—¶é—´è¶…è¿‡é™åˆ¶ |
| `MEMORY_LIMIT_EXCEEDED` | å†…å­˜è¶…é™ | å†…å­˜ä½¿ç”¨è¶…è¿‡é™åˆ¶ |
| `RUNTIME_ERROR` | è¿è¡Œæ—¶é”™è¯¯ | ç¨‹åºå´©æºƒæˆ–å¼‚å¸¸ |
| `COMPILATION_ERROR` | ç¼–è¯‘é”™è¯¯ | ä»£ç è¯­æ³•é”™è¯¯ |

## API ä½¿ç”¨ç¤ºä¾‹

### gRPC æ¥å£
```go
// åˆ›å»ºè¯„æµ‹è¯·æ±‚
req := &rpc.JudgeRequest{
    Language:    rpc.Language_go,
    ProblemId:   206,
    Uid:         12345,
    Code:        userCode,
    FullTemplate: template,
    TypeDefinition: types,
    Input:       []string{"[1,2,3]", "[4,5]"},
    Output:      []string{"[3,2,1]", "[5,4]"},
    MaxMem:      "128",  // 128MB
    MaxTime:     "1000", // 1000ms
}

// å‘é€è¯„æµ‹è¯·æ±‚
resp, err := client.Judge(ctx, req)
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°è¯­è¨€æ”¯æŒ

1. åœ¨ `pkg/runner/` ä¸‹åˆ›å»ºæ–°çš„ runner æ–‡ä»¶
2. å®ç° `RunnerServiceServer` æ¥å£
3. åœ¨ `pkg/types/const.go` ä¸­æ·»åŠ è¯­è¨€ç›¸å…³å¸¸é‡
4. åˆ›å»ºå¯¹åº”çš„ Docker é•œåƒ

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License
